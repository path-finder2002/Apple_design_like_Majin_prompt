# フルブリード・ビジュアルアジェンダ要件定義（GAS実装向け）

## 目的
- 冒頭アジェンダをダイナミックに演出し、ナイトスカイと山岳のフルブリード背景で印象的な導入を行う。
- Appleライクなタイポグラフィとダークトーンのビジュアルを組み合わせ、落ち着きと高級感を両立させる。
- Google Apps Script (GAS) を用いた Google スライド自動生成に適したコンポーネント仕様を定義する。

## レイアウト
- スライドサイズ: 16:9 (Google スライド既定の 960 × 540pt を想定)。
- 背景は全面フルブリードで山岳のシルエットと夜空のグラデーションを描画。
- 左側 120pt 付近のガイドライン上にアジェンダ項目を縦積み。行間は 180pt 程度。
- テキストの安全領域: 左端 100pt 〜 820pt, 上端 180pt 〜 720pt を目安に配置。

## ビジュアル仕様
- 夜空: 縦方向のダークブルーグラデーション（`#1A223A → #202B47 → #161D33`）。
- 山岳: 奥から順に 3 レイヤーで濃淡を変えたポリゴン。
  - 遠景: `#2A3B5C`
  - 中景: `#23334F`
  - 前景メインピーク: `#1D2945`（必要に応じて雪帽子 `#F0F4FA` を追加）。
- 下端に霧（フォグ）を重ねるための半透明レイヤー: `#1A223A`, opacity 0.55, 高さ 220pt。
- 全体のコントラストと可読性を確保するため、背景上に半透明ブラックのオーバーレイ (`opacity 0.2〜0.3`) を追加。

## タイポグラフィ
- フォント: `Inter` を第一候補。代替は `'SF Pro Display'`, `system-ui`, `-apple-system`, `'Segoe UI'`, `Roboto`, `Helvetica`, `Arial`, `sans-serif`。
- ウェイト: Bold (700)。
- サイズ: 120pt。
- 文字色: `#FFFFFF`。
- 字間 (letter-spacing): 0.2pt を推奨。
- 項目数は 3〜4 件を想定し、追加する場合は行間リズム (約 180pt) を維持。

## カラーパレット
- 夜空: `#1A223A`, `#202B47`, `#161D33`
- 山岳: `#2A3B5C`, `#23334F`, `#1D2945`
- 雪: `#F0F4FA`
- 霧: `#1A223A` (opacity 0.55)
- オーバーレイ: `#000000` (opacity 0.2〜0.3)
- テキスト: `#FFFFFF`

## GAS実装ガイド
1. **背景処理**
   - Google スライドでは図形のグラデーション指定が一部制限されるため、以下の2通りを検討。
     1. 外部SVGやPNGを `insertImage` で背景に配置し、スライドサイズに合わせて拡大。
     2. `SlidesApp.ShapeType.RECTANGLE` と `setSolidFill` を組み合わせ、グラデーションの代わりに 3 色のレイヤーで疑似的に再現。
   - 自由にドロップシャドウを付与できない場合は、テキストの視認性確保のためオーバーレイ矩形 (`opacity 0.25`) を描画する。

2. **山岳レイヤー**
   - `insertShape(SlidesApp.ShapeType.POLYGON)` を使用し、座標列をポイント配列で指定。
   - レイヤー順: 遠景 → 中景 → 前景 → 雪帽子。
   - 座標変換は 960×540pt のスライドに合わせてスケーリングする (`px × 0.75`)。

3. **霧レイヤー**
   - `insertShape` で横長の矩形を生成し、`setSolidFill` と `setTransparency` (または `setAlpha`) で半透明に設定。

4. **テキスト描画**
   - `insertShape(TEXT_BOX)` で 3 件のテキストボックスを生成し、`applyTextStyle` 相当のユーティリティでフォント・サイズを適用。
   - 内容は `data.items` など配列で管理し、順に縦方向へ配置。
   - `setContentAlignment(SlidesApp.ContentAlignment.MIDDLE)` は不要。`ParagraphAlignment.START` を維持する。

5. **ドロップシャドウ / 視認性強化**
   - Slides API ではテキストドロップシャドウの直接指定が難しいため、必要ならテキスト背後に透過ボックス (`opacity 0.2`) を敷く。
   - 背景画像でシャドウを表現する場合は、画像生成時に組み込む。

6. **コンフィグ連携**
   - `CONFIG.POS_PX` に `fullBreedSlide` セクションを追加し、レイアウト座標を管理。
   - `CONFIG.COLORS` に夜空・山岳・テキストなどの定数を登録して使い回す。
   - `slideGenerators.fullBreed` のような関数を実装し、`slideData` の `type: 'fullBreed'` を処理する。

## アクセシビリティ
- 白文字とダーク背景により WCAG AA のコントラスト比を満たす。
- テキストサイズ 120pt は遠距離からの視認性が高い。
- 背景画像に暗いオーバーレイを重ね、テキストとのコントラストを常に確保する。
- 霧レイヤーの透明度は 0.45〜0.6 の範囲で微調整し、過度なモヤで視認性を落とさない。

## 実装上の注意
- 動的テキスト差し替えを想定し、文字列長が長くなるケースではフォントサイズや行間を縮小する処理を追加。
- 背景画像を使用する場合、Apps Script が外部URLアクセスを許可されているか確認し、キャッシュパスを用意。
- プレゼン全体でダークテーマを採用する場合は、フッターやページ番号など他の要素も同系統カラーに合わせる。

